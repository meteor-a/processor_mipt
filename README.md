# processor_mipt

## Репозиторий включает в себя: ассемблер, процессор(исполнитель ассемблерного кода), дисассемблер.

### Команды, поддерживаемые процессором:
1. **HLT**     - конец программы
2. **PUSH**    - положить элемент в стэк
3. **POP**     - достать элемент из стэка
4. **IN**      - считать элемент
5. **OUT**     - вывести элемент
6. **ADD**     - достать два элемента из стэка, сложить их и результат положить обратно
7. **SUB**     - достать два элемента из стэка, вычисть их и результат положить обратно
8. **MUL**     - достать два элемента из стэка, умножить их и результат положить обратно
9. **DIV**     - достать два элемента из стэка, разделить(целочисленно) их и результат положить обратно
10. **SQRT**   - достать элемент из стека, вычислить его квадратный корень и положить результат обратно
11. **JMP**    - перейти к метке без условия
12. **JA**     - достать два элемента из стека, сравнить их (более глубокий > менее глубокий).  Если true, то перейти к метке, иначе продолжить выполнение
13. **JAE**    - достать два элемента из стека, сравнить их (более глубокий >= менее глубокий). Если true, то перейти к метке, иначе продолжить выполнение
14. **JB**     - достать два элемента из стека, сравнить их (более глубокий < менее глубокий).  Если true, то перейти к метке, иначе продолжить выполнение
15. **JBE**    - достать два элемента из стека, сравнить их (более глубокий <= менее глубокий). Если true, то перейти к метке, иначе продолжить выполнение
16. **JE**     - достать два элемента из стека, сравнить их (более глубокий == менее глубокий). Если true, то перейти к метке, иначе продолжить выполнение
17. **JNE**    - достать два элемента из стека, сравнить их (более глубокий != менее глубокий). Если true, то перейти к метке, иначе продолжить выполнение
18. **AH**     - развлекательная команда)0)
19. **CALL**   - вызов функции(переход к метке)
20. **RET**    - возврат из функции и продолжение выполнение программы, после call
21. **GRAPH**  - отрисовка графики
22. **STROUT** - вывод строки
23. **DB**     - обозначение строки

### Примеры программ
Примеры находятся в папке examples

### Синтаксис команд

1. **PUSH**:  
PUSH 5    - положить число 5 в стэк  
PUSH [5]  - положить в стек число из 5 ячейки ОЗУ  
PUSH ax   - положить в стэк значение регистра ax  
PUSH [ax] - положить в стек число из ячейки ОЗУ с номером, лежащем в ax (ОЗУ[ax])  
PUSH 5+ax - положить в стек число, полученно в результате сложения 5 и числа из регистра ax  
PUSH ax+5 - положить в стек число, полученно в результате сложения 5 и числа из регистра ax   
PUSH 5.23 - положить число 5.23 в стэк  

2. **POP**:  
POP ax     - достать число из стека и положить его в регистр ax  
POP [5]    - достать число из стека и положить его в ячейку 5 ОЗУ  
POP [ax+5] - достать число из стека и положить его в ячейку ОЗУ с номером, ax + 5  
POP [5+ax] - достать число из стека и положить его в ячейку ОЗУ с номером, ax + 5  

3. **IN**:  
IN ax     - считать число и положить его в регистр ax  
IN [5]    - считать число и положить его в ячейку 5 ОЗУ  
IN [ax+5] - считать число и положить его в ячейку ОЗУ с номером, ax + 5  
IN [5+ax] - считать число и положить его в ячейку ОЗУ с номером, ax + 5  

4. **JMP**/**JA**/**JAE**/**JB**/**JBE**/**JE**/**JNE**/**CALL**:  
**Команда** *метка*  

5. Примеры **Метки**:  
Label  
Cur  
DFG  
bv  

6. Объявление **Метки**:  
Label:  
Cur:  
DFG:  
bv:  

7. **DB**:  
DB $text$  

8. Объявление строки:  
TextAboutAhatina:  
  DB $text$  
  
9. Вывод строки:
STROUT TextAboutAhatina

## Компиляция ассемблера:  
> make asm

## Компиляция дисассемблера:  
> make asm

## Компиляция процессора(windows):  
> make cpu

## Компиляция процессора(Linux):  
> make cpu_sfml

